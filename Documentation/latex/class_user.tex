\hypertarget{class_user}{}\doxysection{User Class Reference}
\label{class_user}\index{User@{User}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_user_a33a494666535d427dd8a1e157d926c12}{\+\_\+\+\_\+construct}} (string \$usernamep, string \$emailp, string \$id\+Rolep, int \$id\+Userp)
\item 
\mbox{\hyperlink{class_user_a0cd589276a2e526192db261f0813f244}{update\+Password}} (string \$new\+Password, string \$new\+Password\+Repeat, string \$old\+Password)
\item 
\mbox{\hyperlink{class_user_a187c3c585763cb6bc4364bfda2874381}{update\+Private\+Account}} ()
\item 
\mbox{\hyperlink{class_user_a7ee23f234f605d5e172d7bb660d2e837}{get\+Private\+Account}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_user_a0eb82aa5f81cf845de4b36cd653c42cf}\label{class_user_a0eb82aa5f81cf845de4b36cd653c42cf}} 
{\bfseries \$username}
\item 
\mbox{\Hypertarget{class_user_ad634f418b20382e2802f80532d76d3cd}\label{class_user_ad634f418b20382e2802f80532d76d3cd}} 
{\bfseries \$email}
\item 
\mbox{\Hypertarget{class_user_a1ea903cca285c7c0b4c9203932100309}\label{class_user_a1ea903cca285c7c0b4c9203932100309}} 
{\bfseries \$role}
\item 
\mbox{\Hypertarget{class_user_a131a1d79576d015b9319cb82c02a97c0}\label{class_user_a131a1d79576d015b9319cb82c02a97c0}} 
{\bfseries \$id\+User}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{user_8php_source_l00010}{10}} of file \mbox{\hyperlink{user_8php_source}{user.\+php}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_user_a33a494666535d427dd8a1e157d926c12}\label{class_user_a33a494666535d427dd8a1e157d926c12}} 
\index{User@{User}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!User@{User}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily \+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{string}]{\$usernamep,  }\item[{string}]{\$emailp,  }\item[{string}]{\$id\+Rolep,  }\item[{int}]{\$id\+Userp }\end{DoxyParamCaption})}

default constructor


\begin{DoxyParams}[1]{Parameters}
string & {\em \$usernamep} & \\
\hline
string & {\em \$emailp} & \\
\hline
string & {\em \$id\+Rolep} & \\
\hline
integer & {\em \$id\+Userp} & \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{user_8php_source_l00025}{25}} of file \mbox{\hyperlink{user_8php_source}{user.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026     \{}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028         \$this-\/>username = \$usernamep;}
\DoxyCodeLine{00029         \$this-\/>email = \$emailp;}
\DoxyCodeLine{00030         \$this-\/>role = \$idRolep;}
\DoxyCodeLine{00031         \$this-\/>idUser = \$idUserp;}
\DoxyCodeLine{00032     \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_user_a7ee23f234f605d5e172d7bb660d2e837}\label{class_user_a7ee23f234f605d5e172d7bb660d2e837}} 
\index{User@{User}!getPrivateAccount@{getPrivateAccount}}
\index{getPrivateAccount@{getPrivateAccount}!User@{User}}
\doxysubsubsection{\texorpdfstring{getPrivateAccount()}{getPrivateAccount()}}
{\footnotesize\ttfamily get\+Private\+Account (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

use to know if the account is privat or not

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{user_8php_source_l00106}{106}} of file \mbox{\hyperlink{user_8php_source}{user.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00107     \{}
\DoxyCodeLine{00108         \$dbh = \textcolor{keyword}{new} PDO(\textcolor{stringliteral}{'mysql:host='} . HOST . \textcolor{stringliteral}{';dbname='} . DBNAME, USER, PASSWORD, array(}
\DoxyCodeLine{00109             PDO::MYSQL\_ATTR\_INIT\_COMMAND => \textcolor{stringliteral}{"{}SET NAMES utf8"{}},}
\DoxyCodeLine{00110             PDO::ATTR\_PERSISTENT => \textcolor{keyword}{true}}
\DoxyCodeLine{00111         ));}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00114             \$sqlGetPrivateAccount = \textcolor{stringliteral}{"{}SELECT privateAccount FROM user WHERE id = :id\_user"{}};}
\DoxyCodeLine{00115             \$psGetPrivateAccount = \$dbh-\/>prepare(\$sqlGetPrivateAccount);}
\DoxyCodeLine{00116             \$psGetPrivateAccount-\/>setFetchMode(PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00117             \$psGetPrivateAccount-\/>execute(array(\textcolor{stringliteral}{':id\_user'} => \$this-\/>idUser));}
\DoxyCodeLine{00118             \$result = \$psGetPrivateAccount-\/>fetchAll();}
\DoxyCodeLine{00119         \} \textcolor{keywordflow}{catch} (PDOException \$e) \{}
\DoxyCodeLine{00120             print \textcolor{stringliteral}{"{}Erreur !: "{}} . \$e-\/>getMessage() . \textcolor{stringliteral}{"{}<br>"{}};}
\DoxyCodeLine{00121             die();}
\DoxyCodeLine{00122         \}}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124         \textcolor{keywordflow}{return} \$result[0][\textcolor{stringliteral}{'privateAccount'}];}
\DoxyCodeLine{00125     \}}

\end{DoxyCode}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{class_user_a7ee23f234f605d5e172d7bb660d2e837_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_user_a0cd589276a2e526192db261f0813f244}\label{class_user_a0cd589276a2e526192db261f0813f244}} 
\index{User@{User}!updatePassword@{updatePassword}}
\index{updatePassword@{updatePassword}!User@{User}}
\doxysubsubsection{\texorpdfstring{updatePassword()}{updatePassword()}}
{\footnotesize\ttfamily update\+Password (\begin{DoxyParamCaption}\item[{string}]{\$new\+Password,  }\item[{string}]{\$new\+Password\+Repeat,  }\item[{string}]{\$old\+Password }\end{DoxyParamCaption})}

update the user password in the database


\begin{DoxyParams}[1]{Parameters}
string & {\em \$new\+Password} & \\
\hline
string & {\em \$new\+Password\+Repeat} & \\
\hline
string & {\em \$old\+Password} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{user_8php_source_l00042}{42}} of file \mbox{\hyperlink{user_8php_source}{user.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00043     \{}
\DoxyCodeLine{00044         \$dbh = \textcolor{keyword}{new} PDO(\textcolor{stringliteral}{'mysql:host='} . HOST . \textcolor{stringliteral}{';dbname='} . DBNAME, USER, PASSWORD, array(}
\DoxyCodeLine{00045             PDO::MYSQL\_ATTR\_INIT\_COMMAND => \textcolor{stringliteral}{"{}SET NAMES utf8"{}},}
\DoxyCodeLine{00046             PDO::ATTR\_PERSISTENT => \textcolor{keyword}{true}}
\DoxyCodeLine{00047         ));}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049         \$hasBeenUpdated = 1;}
\DoxyCodeLine{00050         \textcolor{keywordflow}{if} (password\_verify(\$oldPassword, \$this-\/>getUserPassword())) \{}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052             \textcolor{keywordflow}{if} (\$newPasswordRepeat == \$newPassword) \{}
\DoxyCodeLine{00053                 \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00054                     \$sqlUpdatePassword = \textcolor{stringliteral}{"{}UPDATE user  SET password = :update\_password WHERE id = :id\_user"{}};}
\DoxyCodeLine{00055                     \$psUpdatePassword = \$dbh-\/>prepare(\$sqlUpdatePassword);}
\DoxyCodeLine{00056                     \$psUpdatePassword-\/>execute(array(\textcolor{stringliteral}{':update\_password'} => password\_hash(\$newPassword, PASSWORD\_DEFAULT), \textcolor{stringliteral}{':id\_user'} => \$this-\/>idUser));}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058                     \$hasBeenUpdated = 0;}
\DoxyCodeLine{00059                 \} \textcolor{keywordflow}{catch} (PDOException \$e) \{}
\DoxyCodeLine{00060                     print \textcolor{stringliteral}{"{}Erreur !: "{}} . \$e-\/>getMessage() . \textcolor{stringliteral}{"{}<br>"{}};}
\DoxyCodeLine{00061                     die();}
\DoxyCodeLine{00062                 \}}
\DoxyCodeLine{00063             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00064                 \$hasBeenUpdated = 2;}
\DoxyCodeLine{00065             \}}
\DoxyCodeLine{00066         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00067             \$hasBeenUpdated = 4;}
\DoxyCodeLine{00068         \}}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070         \textcolor{keywordflow}{return} \$hasBeenUpdated;}
\DoxyCodeLine{00071     \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_user_a187c3c585763cb6bc4364bfda2874381}\label{class_user_a187c3c585763cb6bc4364bfda2874381}} 
\index{User@{User}!updatePrivateAccount@{updatePrivateAccount}}
\index{updatePrivateAccount@{updatePrivateAccount}!User@{User}}
\doxysubsubsection{\texorpdfstring{updatePrivateAccount()}{updatePrivateAccount()}}
{\footnotesize\ttfamily update\+Private\+Account (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

update if the account is private or not

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{user_8php_source_l00077}{77}} of file \mbox{\hyperlink{user_8php_source}{user.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00078     \{}
\DoxyCodeLine{00079         \$dbh = \textcolor{keyword}{new} PDO(\textcolor{stringliteral}{'mysql:host='} . HOST . \textcolor{stringliteral}{';dbname='} . DBNAME, USER, PASSWORD, array(}
\DoxyCodeLine{00080             PDO::MYSQL\_ATTR\_INIT\_COMMAND => \textcolor{stringliteral}{"{}SET NAMES utf8"{}},}
\DoxyCodeLine{00081             PDO::ATTR\_PERSISTENT => \textcolor{keyword}{true}}
\DoxyCodeLine{00082         ));}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084         \$userisPrivate = \$this-\/>\mbox{\hyperlink{class_user_a7ee23f234f605d5e172d7bb660d2e837}{getPrivateAccount}}();}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086         \textcolor{keywordflow}{if} (\$userisPrivate == 0) \{}
\DoxyCodeLine{00087             \$userSetPrivateTo = 1;}
\DoxyCodeLine{00088         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00089             \$userSetPrivateTo = 0;}
\DoxyCodeLine{00090         \}}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092         \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00093             \$sqlUpdatePrivateAccount = \textcolor{stringliteral}{"{}UPDATE user  SET privateAccount = :update\_private\_account WHERE id = :id\_user"{}};}
\DoxyCodeLine{00094             \$psUpdatePrivateAccount = \$dbh-\/>prepare(\$sqlUpdatePrivateAccount);}
\DoxyCodeLine{00095             \$psUpdatePrivateAccount-\/>execute(array(\textcolor{stringliteral}{':update\_private\_account'} => \$userSetPrivateTo, \textcolor{stringliteral}{':id\_user'} => \$this-\/>idUser));}
\DoxyCodeLine{00096         \} \textcolor{keywordflow}{catch} (PDOException \$e) \{}
\DoxyCodeLine{00097             print \textcolor{stringliteral}{"{}Erreur !: "{}} . \$e-\/>getMessage() . \textcolor{stringliteral}{"{}<br>"{}};}
\DoxyCodeLine{00098             die();}
\DoxyCodeLine{00099         \}}
\DoxyCodeLine{00100     \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{class_user_a187c3c585763cb6bc4364bfda2874381_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
models/\mbox{\hyperlink{user_8php}{user.\+php}}\end{DoxyCompactItemize}
